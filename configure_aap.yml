---
- name: Include vars
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include variables
      tags: always
      block:
        - name: Ensure aap_version has been provided
          ansible.builtin.assert:
            that:
              - aap_version is defined
              - aap_version in ['24', '25']
            fail_msg: "Please specify aap_version as '24' or '25'"

        - name: Ensure object_set has been provided
          ansible.builtin.assert:
            that:
              - object_set is defined
              - object_set in ['A', 'B', 'empty', 'null']
            fail_msg: "Please specify aap_version as 'A', 'B', 'empty' or 'null'"

        - name: Include var files unless null
          when: object_set != 'null'
          block:
            - name: Include all vars
              ansible.builtin.include_vars: "test_objects_set_{{ object_set }}"
          
            - name: Include role vars
              ansible.builtin.include_vars: "test_objects_set_{{ object_set }}_roles_{{ aap_version }}"

#       - name: Include objects
#         ansible.builtin.include_vars:
#           dir: objects
#           extensions:
#             - ''

- name: Run playbook to configure AAP
  import_playbook: configify.aapconfig.aap_configure.yml
  vars:
    github_pat: |
          $ANSIBLE_VAULT;1.1;AES256
          64356465343061366238313232663663363337363639373636643339326563353162396330663837
          3031313561356439663035363733643036313263616361300a306161373764366330333565376433
          63356161363262663633393535386366613838306238386165613231303261336334373139363838
          3333366530386661650a613936633637313266326664313739613764386166633538333166366531
          39646666623239333464386262656630663736373534323536346366326439396137386239656465
          30376638393931623138663639373162396566313339613938613633343230393531623133643461
          64666536353136643735306639646339646163303566366535653966643366663030303530666363
          33626164666635663662366630306535373934366234356132386565623435326465333064616634
          6437
    hub_pat:
      '24': |
          $ANSIBLE_VAULT;1.1;AES256
          66616631653164656130366637383863343964343937343164616138353331366463373639616562
          3766643833623932653265656662326331386131306234330a346635313532653239366136623662
          39323430366231366236636332393166613065303639636134663765383932343866663839393961
          3038313861396530330a643033613335616461363362343938363439653663646261386462333432
          64376461633938343563623530356537346530336132386438306162316538316135343835366466
          6634636634343634346635613637653835303065313236666337
      '25': |
          $ANSIBLE_VAULT;1.1;AES256
          65363432316336333830613336633331333936653638663036386661623666653530366563613734
          6232333063306266616532353863393933643731346131320a393763326562626464323231323134
          64333330663936393031326466323433643239326265333262326133633233336434326461626361
          3266646335373831630a383838366230356563613963623835666164323738333062383865653361
          39316436396438373735393437333330663134646533306463313136366431383033343065626238
          3235393964383235336666616662356535303533343361353030
